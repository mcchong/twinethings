<tw-storydata name="Twinethings" startnode="1" creator="Twine" creator-version="2.0.11" ifid="EBE85AD4-A4BB-4D9D-A37A-C2739ABF8252" format="Harlowe" options="" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css">
input {
	display:inline;
	font-size:1em;
	font-family: inherit;
	border-color:black;
	/*border-width:2px;*/
}

form {
	display: inline;
}


img {
	max-width:100%;
	max-height:300px;
	margin:auto;
	display:block;
}

tw-story {
	font-size:1.5em;
	margin: 1em auto;
	width:80%;
	font-family: "Courier New", Courier, monospace;
	font-weight:700;
}

.header-text{
	text-align:center;
	width:100%;
	margin-top:0;
}

.undo, .redo {
	display:none;
}

.blood-thumb{
    border-radius: 75%;
}
</style><script role="script" id="twine-user-script" type="text/twine-javascript">function addMetaViewportTag() {
	var metaTag=document.createElement('meta');
  metaTag.name = "viewport"
  metaTag.content = "width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"
  document.getElementsByTagName('head')[0].appendChild(metaTag);
}

addMetaViewportTag();

window.$ = {
  e: function(name) {
		var as = document.getElementsByTagName('tw-enchantment');
    for (var i = 0; i < as.length; ++i){
			if (name == as[i].innerText) {
				as[i].click();
			}
    }
	}
};




















</script><tw-passagedata pid="1" name="Blood Intro - 1" tags="" position="229,304">{
(set: $doneFilingCabinet to false)
(set: $doneCommitteeMember to false)
(set: $doneBusinessmanSinclair to false)
Greetings friend, it is good to finally be in contact.  From what I can see from here, you are the most capable and reliable person present.  Most importantly, I sense your commitment to seeking the truth.  That above all else is why I have chosen you to aid me in thwarting the [[committee|Blood intro - 2]].  
}</tw-passagedata>
<tw-passagedata pid="2" name="Blood intro - 2" tags="" position="233,452">For the first time in almost a century, the committee’s members are converging on a single location. This may be our one chance to finally obtain concrete evidence of the committee’s past deeds, and finally bring them to justice.  For that I need your [[help|Blood Intro 3]].  </tw-passagedata>
<tw-passagedata pid="3" name="Blood Intro 3" tags="" position="233,604">Before we continue, you must decide whether or not you will accept this mission. You may learn things you would rather not know about our city’s history.  Your eyes may be opened to truths that cannot be unseen.  As always, the committee is watching, so we must remain vigilant.


==&gt;
Blood
&lt;==

Are you ready to [[stop the committee|start]]? Or would you rather just [[eat, drink, and be oblivious|lazy]]?</tw-passagedata>
<tw-passagedata pid="4" name="start" tags="" position="329,785">I’ll try not to take up too much of your time.

This location used to be the committee’s primary storage facility. I believe that there may be evidence here that could lead to the arrest of multiple committee members - if we play our cards right, we should be able to [[force the committee to disband|find the box]] once and for all.
</tw-passagedata>
<tw-passagedata pid="5" name="lazy" tags="" position="171,781">I guess I was wrong about you.

Let me know if you change your mind, and want to help [[stop the committee|start]].</tw-passagedata>
<tw-passagedata pid="6" name="find the box" tags="" position="329,935">
My contact has alerted me of a box located within the building, where the committee of 99 used to keep some of their secret documents.

Start there and let me know what you find out.

{
Interesting, so the committee is looking for
&lt;form onsubmit=&#39;$.e(&quot;sure&quot;); return false&#39;&gt;
&lt;input type=&quot;text&quot; id=&quot;box_input&quot;&gt;
&lt;/input&gt;&lt;/form&gt;? You&#39;re sure?
}

(click: &quot;sure&quot;)[
  (set: $box to document.getElementById(&quot;box_input&quot;).value)
  (go-to: (function() {
    var box = $box.toLowerCase();
	if (box.length == 0) {
	  return &quot;empty box input&quot;;
	} else if (box.indexOf(&quot;bust&quot;) &gt; -1)
	  return &quot;looking for bust&quot;;
	return &quot;unknown-box&quot;;
  })())
]</tw-passagedata>
<tw-passagedata pid="7" name="unknown-box" tags="" position="283,1097">{
(either: &quot;I didn&#39;t quite follow that.&quot;,
         &quot;Sorry, I&#39;m not sure what that is.&quot;,
		 &quot;You&#39;re not making sense.&quot;,
		 &quot;I&#39;m not even sure what a $box is...&quot;)

What did you [[find in the box|find the box]]?
}</tw-passagedata>
<tw-passagedata pid="8" name="looking for bust" tags="" position="425,1096">Interesting, so the committee is looking for the bust?

You mean the old bust of Kaiser Wilhelm?  Of course.  Rumor has it the committee had the bust converted into a safe and used it to store their most sensitive documents, hidden in plain sight.  That bust must contain the evidence we need.  But [[where could it be|branches]]?  </tw-passagedata>
<tw-passagedata pid="9" name="branches" tags="" position="425,1245">{
  &lt;!-- Setting these to false if they were uninitialized just simplifies debugging - you can start here without it failing. --&gt;

(if: $doneFilingCabinet is 0)[
  (set: $doneFilingCabinet to false)
]
(if: $doneCommitteeMember is 0)[
  (set: $doneCommitteeMember to false)
]
(if: $doneBusinessmanSinclair is 0)[
  (set: $doneBusinessmanSinclair to false)
]
(if: $doneFilingCabinet &amp;&amp; $doneCommitteeMember &amp;&amp; $doneBusinessmanSinclair)[
  (goto: &quot;done-all-branches&quot;)
]

&lt;!-- Randomize the order of the streams, to encourage people to do them in a varied order. --&gt;

&lt;!-- $dummy used to execute things using (set:), because twine requires a macro in order to do anything. --&gt;

(set: $options to (a:))

(if: !$doneFilingCabinet)[
  (set: $dummy to $options.push(&quot;take a look at the [[inconspicuous filing cabinet]]&quot;))
]

(if: !$doneCommitteeMember)[
  (set: $dummy to $options.push(&quot;get some information out of a [[nearby committee member]]&quot;))
]

(if: !$doneBusinessmanSinclair)[
  (set: $dummy to $options.push(&quot;investigate [[businessman Sinclair’s dark past]]&quot;))
]

(if: $options&#39;s length &gt; 1)[
  (set: $options to (shuffled: ...$options))
]

(if: $options&#39;s length is 1)[
  (print: &quot;Great work! All that&#39;s left is to &quot; + $options[0] + &quot;.&quot;)
](elseif: $options&#39;s length is 2)[
  (print: &quot;Thanks! Next up, you could &quot; + $options[0] + &quot; or perhaps &quot; + $options[1] + &quot;.&quot;)
](else:)[
(print: &quot;I have a couple leads. Let me know where you want to begin:\n\n One is to &quot; + $options[0] + &quot;.\n\n Alternatively, you could  &quot; + $options[1] + &quot;.\n\n You might also want to &quot; + $options[2] + &quot;.&quot;)
]
}</tw-passagedata>
<tw-passagedata pid="10" name="inconspicuous filing cabinet" tags="" position="118,1256">[[done|done-cabinet]]



</tw-passagedata>
<tw-passagedata pid="11" name="nearby committee member" tags="" position="268,1519">
Have you seen any committee members around? Anyone sitting around sifting through documents, instead of enjoying the evening? Or dressed strangely formally? The committee always did encourage suits and ties.

You’ve [[found | found-committee-member]] someone?
</tw-passagedata>
<tw-passagedata pid="12" name="businessman Sinclair’s dark past" tags="" position="670,1591">[[done|done-businessman-sinclair]]</tw-passagedata>
<tw-passagedata pid="13" name="Footer" tags="footer" position="87,306">{
(if: (history:)&#39;s length is 0 and 
     (saved-games:) contains &quot;Z&quot;)[
	 (load-game: &quot;Z&quot;)
]

(if: (history:)&#39;s length is not 0)[
	(if:(save-game:&quot;Z&quot;))[
    ](else: )[
      TODO - remove this. Couldn&#39;t save game.
    ]
]
}</tw-passagedata>
<tw-passagedata pid="14" name="Debugging only - start from beginning" tags="" position="235,156">(goto: &quot;Blood Intro - 1&quot;)
&lt;!--(goto: &quot;show-contact-documents&quot;)--&gt;
(save-game: &quot;Z&quot;)</tw-passagedata>
<tw-passagedata pid="15" name="done-cabinet" tags="" position="104,1449">(set: $doneFilingCabinet to true)

[[Back to the branches |branches]]</tw-passagedata>
<tw-passagedata pid="16" name="done-businessman-sinclair" tags="" position="798,1240">(set: $doneBusinessmanSinclair to true)


[[Back to the branches |branches]]</tw-passagedata>
<tw-passagedata pid="17" name="done-all-branches" tags="" position="937,939">User is done all the branches!</tw-passagedata>
<tw-passagedata pid="18" name="empty box input" tags="" position="161,935">{
(either: &quot;Excuse me?&quot;,
         &quot;You&#39;ve got to tell me what found.&quot;,
		 &quot;Try typing your answer in the little textbox thing.&quot;)

What did you [[find in the box|find the box]]?
}</tw-passagedata>
<tw-passagedata pid="19" name=" found-committee-member" tags="" position="273,1679">I wonder what they’re looking at. See if you can get ahold of their briefcase, remove whatever’s inside, and put the briefcase back without them noticing. I’ve got a contact at your location who may be able to help you interpret what you find.

You’ll be able to identify my contact by their anti-committee button. Try [[showing them|show-contact-documents]] the documents.</tw-passagedata>
<tw-passagedata pid="20" name="show-contact-documents" tags="" position="269,1834">Wonderful, did my contact wearing the anti-committee button provide you with any useful information? Do you know anything more about where the bust is hidden?
{&lt;!-- 
Careful changing whitespace here, it&#39;s a bit fiddly.
When there are multiple input fields, you need an explicit enter key handler.
--&gt;}
The bust is within &lt;form onsubmit=&#39;$.e(&quot;sure&quot;); return false&#39;&gt;&lt;input onkeydown = &#39;if (event.keyCode === 13) {$.e(&quot;sure&quot;)}&#39; type=&quot;text&quot; id=&quot;bust_distance_museum&quot;&gt;&lt;/input&gt; of the &lt;input onkeydown = &#39;if (event.keyCode === 13) {$.e(&quot;sure&quot;)}&#39; type=&quot;text&quot; id=&quot;bust_distance_museum_location&quot;&gt;&lt;/input&gt;&lt;/form&gt;? Are you sure?

(click: &quot;sure&quot;)[
  (set: $distance to document.getElementById(&quot;bust_distance_museum&quot;).value)
  (set: $location to document.getElementById(&quot;bust_distance_museum_location&quot;).value)
  (goto: &quot;check-museum-location&quot;)
]</tw-passagedata>
<tw-passagedata pid="21" name="check-museum-location" tags="" position="265,1989">{
&lt;!-- Comments in javascript blocks like this explode things. --&gt;
&lt;!-- TODO - substitute correct number for distance. --&gt;

(set: $error to (function() {
    var location = $location.toLowerCase();
    var distance = $distance.toLowerCase();
	var non_number_regex = new RegExp(&quot;[^0-9]&quot;, &quot;g&quot;);
    var number = distance.replace(non_number_regex, &quot;&quot;);
	
    if (location.length === 0)
	  return &quot;What [[location|show-contact-documents]] are you referring to?&quot;;
	if (number.length === 0) 
	  return &quot;How [[far away|show-contact-documents]] is it?&quot;;
	if (location.indexOf(&quot;museum&quot;) is -1)
	  return (&quot;It&#39;s &quot; + distance + &quot; from &quot; + location + &quot;? That doesn&#39;t make a whole lot of sense. Are you [[sure|show-contact-documents]]?&quot;);
	if (number != &quot;2&quot;)
	  return (&quot;It&#39;s &quot; + distance + &quot; away from the Waterloo Regional Museum? That doesn&#39;t seem quite right. Are you [[sure|show-contact-documents]]?&quot;);
	return &quot;&quot;;
})())

(if: $error&#39;s length &gt; 0)[
  (print: $error)
](else:)[
  (set: $doneCommitteeMember to true)
  (goto: &quot;branches&quot;)
]
}</tw-passagedata>
<tw-passagedata pid="22" name="Header" tags="header" position="394,303">&lt;img class=&quot;blood-thumb&quot; src=&quot;assets/incognito.jpg&quot; width=&quot;100&quot; height=&quot;100&quot; alt=&quot;j.blood&quot;&gt;
&lt;p class=&quot;header-text&quot;&gt;[``**INCOMING MESSAGE**``]&lt;/p&gt;</tw-passagedata>
</tw-storydata>
